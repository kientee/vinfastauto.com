import React from 'react';
import { Link, useLocation } from 'react-router-dom'
import { useSelector } from 'react-redux';
import { selectUser } from '../../../redux/user/userSlice';

import './sidebar-user.scss'

const SidebarUserItem = props => {
    const active = props.active ? 'active' : ''

    return <div className='sidebar__item' key={props.key}>
        <div className={`sidebar__item__user--inner ${active}`}>
            {active ? <span>{props.icon_active}</span> : <span>{props.icon}</span>}
            <span>{props.title}</span>
        </div>
    </div>
}

const SidebarUser = () => {

    const sidebar_user_item = [
        {
            display_name: 'Thông tin cá nhân',
            route: "/settings/thong-tin-ca-nhan",
            icon: <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13 6.5C13 10.0767 10.0767 13 6.5 13C2.92328 13 0 10.0767 0 6.5C0 2.92329 2.92328 0 6.5 0C10.0767 0 13 2.92329 13 6.5ZM10.3175 9.7672C9.83598 8.83863 8.87302 8.18519 7.73809 8.18519C7.66931 8.18519 7.60053 8.18519 7.56614 8.21958C7.22222 8.32276 6.87831 8.39154 6.5 8.39154C6.12169 8.39154 5.77778 8.32276 5.43386 8.21958C5.36508 8.18519 5.2963 8.18519 5.2619 8.18519C4.12698 8.18519 3.16402 8.83863 2.68254 9.7672C3.61111 10.8677 4.98677 11.5556 6.53439 11.5556C8.01323 11.5556 9.38889 10.8677 10.3175 9.7672ZM4.16138 4.84921C4.16138 6.12169 5.19312 7.15344 6.46561 7.15344C7.73809 7.15344 8.76984 6.12169 8.76984 4.84921C8.76984 3.57672 7.73809 2.54498 6.46561 2.54498C5.19312 2.54498 4.16138 3.57672 4.16138 4.84921Z" fill="#707070"></path>
                </svg>,
            icon_active: <svg width="13" height="13" viewBox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13 6.5C13 10.0767 10.0767 13 6.5 13C2.92328 13 0 10.0767 0 6.5C0 2.92329 2.92328 0 6.5 0C10.0767 0 13 2.92329 13 6.5ZM10.3175 9.7672C9.83598 8.83863 8.87302 8.18519 7.73809 8.18519C7.66931 8.18519 7.60053 8.18519 7.56614 8.21958C7.22222 8.32276 6.87831 8.39154 6.5 8.39154C6.12169 8.39154 5.77778 8.32276 5.43386 8.21958C5.36508 8.18519 5.2963 8.18519 5.2619 8.18519C4.12698 8.18519 3.16402 8.83863 2.68254 9.7672C3.61111 10.8677 4.98677 11.5556 6.53439 11.5556C8.01323 11.5556 9.38889 10.8677 10.3175 9.7672ZM4.16138 4.84921C4.16138 6.12169 5.19312 7.15344 6.46561 7.15344C7.73809 7.15344 8.76984 6.12169 8.76984 4.84921C8.76984 3.57672 7.73809 2.54498 6.46561 2.54498C5.19312 2.54498 4.16138 3.57672 4.16138 4.84921Z" fill="#2C72C6"></path>
                        </svg>
        },
        {
            display_name: 'Giỏ hàng',
            route: "/settings/gio-hang",
            icon: <svg fill="none" height="15" viewBox="0 0 19 19" width="15" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.1692 4.84202C16.9568 4.57923 16.6411 4.42854 16.3032 4.42854H4.23485L4.12708 3.65617C4.05076 3.10925 3.57675 2.69678 3.02447 2.69678H2.07828C1.80504 2.69678 1.5835 2.91832 1.5835 3.19157C1.5835 3.46481 1.80504 3.68635 2.07828 3.68635h6.02447C3.08583 3.68635 3.13852 3.73218 3.14696 3.79295L4.48255 13.3649C4.55887 13.9119 5.03288 14.3243 5.58516 14.3243H6.12166C6.06674 14.4792 6.03656 14.6456 6.03656 14.8191C6.03656 15.6376 6.70245 16.3035 7.52092 16.3035C8.3394 16.3035 9.00529 15.6376 9.00529 14.8191C9.00529 14.6456 8.97511 14.4792 8.92018 14.3243H11.5643C11.5094 14.4792 11.4792 14.6456 11.4792 14.8191C11.4792 15.6376 12.1451 16.3035 12.9636 16.3035C13.7821 16.3035 14.448 15.6376 14.448 14.8191C14.448 14.6456 14.4178 14.4792 14.3629 14.3243H15.4376C15.7108 14.3243 15.9324 14.1028 15.9324 13.8295C15.9324 13.5563 15.7108 13.3347 15.4376 13.3347H5.58519C5.52383 13.3347 5.47114 13.2889 5.4627 13.2281L5.33949 12.3451H15.0838C15.6051 12.3451 16.0629 11.9751 16.1725 11.4651L17.3918 5.77513C17.4626 5.44483 17.3815 5.10473 17.1692 4.84202ZM8.01574 14.8191C8.01574 15.0919 7.79377 15.3139 7.52095 15.3139C7.24814 15.3139 7.02617 15.0919 7.02617 14.8191C7.02617 14.5463 7.24814 14.3243 7.52095 14.3243C7.79377 14.3243 8.01574 14.5462 8.01574 14.8191ZM13.4584 14.8191C13.4584 15.0919 13.2364 15.3139 12.9636 15.3139C12.6908 15.3139 12.4688 15.0919 12.4688 14.8191C12.4688 14.5463 12.6908 14.3243 12.9636 14.3243C13.2364 14.3243 13.4584 14.5462 13.4584 14.8191ZM16.4242 5.56769L15.2049 11.2575C15.1927 11.3143 15.1418 11.3555 15.0838 11.3555H5.20139L4.37293 5.41808H16.3031C16.3521 5.41808 16.3826 5.44307 16.3995 5.46403C16.4164 5.48497 16.4344 5.51995 16.4242 5.56769Z" fill="#707070"></path>
                </svg>,
            icon_active: <svg fill="none" height="15" viewBox="0 0 19 19" width="15" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.1692 4.84202C16.9568 4.57923 16.6411 4.42854 16.3032 4.42854H4.23485L4.12708 3.65617C4.05076 3.10925 3.57675 2.69678 3.02447 2.69678H2.07828C1.80504 2.69678 1.5835 2.91832 1.5835 3.19157C1.5835 3.46481 1.80504 3.68635 2.07828 3.68635h6.02447C3.08583 3.68635 3.13852 3.73218 3.14696 3.79295L4.48255 13.3649C4.55887 13.9119 5.03288 14.3243 5.58516 14.3243H6.12166C6.06674 14.4792 6.03656 14.6456 6.03656 14.8191C6.03656 15.6376 6.70245 16.3035 7.52092 16.3035C8.3394 16.3035 9.00529 15.6376 9.00529 14.8191C9.00529 14.6456 8.97511 14.4792 8.92018 14.3243H11.5643C11.5094 14.4792 11.4792 14.6456 11.4792 14.8191C11.4792 15.6376 12.1451 16.3035 12.9636 16.3035C13.7821 16.3035 14.448 15.6376 14.448 14.8191C14.448 14.6456 14.4178 14.4792 14.3629 14.3243H15.4376C15.7108 14.3243 15.9324 14.1028 15.9324 13.8295C15.9324 13.5563 15.7108 13.3347 15.4376 13.3347H5.58519C5.52383 13.3347 5.47114 13.2889 5.4627 13.2281L5.33949 12.3451H15.0838C15.6051 12.3451 16.0629 11.9751 16.1725 11.4651L17.3918 5.77513C17.4626 5.44483 17.3815 5.10473 17.1692 4.84202ZM8.01574 14.8191C8.01574 15.0919 7.79377 15.3139 7.52095 15.3139C7.24814 15.3139 7.02617 15.0919 7.02617 14.8191C7.02617 14.5463 7.24814 14.3243 7.52095 14.3243C7.79377 14.3243 8.01574 14.5462 8.01574 14.8191ZM13.4584 14.8191C13.4584 15.0919 13.2364 15.3139 12.9636 15.3139C12.6908 15.3139 12.4688 15.0919 12.4688 14.8191C12.4688 14.5463 12.6908 14.3243 12.9636 14.3243C13.2364 14.3243 13.4584 14.5462 13.4584 14.8191ZM16.4242 5.56769L15.2049 11.2575C15.1927 11.3143 15.1418 11.3555 15.0838 11.3555H5.20139L4.37293 5.41808H16.3031C16.3521 5.41808 16.3826 5.44307 16.3995 5.46403C16.4164 5.48497 16.4344 5.51995 16.4242 5.56769Z" fill="#2C72C6"></path>
                        </svg>
        },
        {
            display_name: 'Lịch sử giao dịch',
            route: "/settings/lich-su-giao-dich",
            icon: <svg fill="none" height="13" viewBox="0 0 13 13" width="13" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.48285 13C4.93931 13 3.53298 12.4497 2.40106 11.5556C2.12665 11.3148 2.09235 10.9021 2.36675 10.627L2.67546 10.3175C2.91557 10.0767 3.25858 10.0767 3.49868 10.2487C4.3219 10.9021 5.35092 11.2804 6.48285 11.2804C9.15831 11.2804 11.285 9.11376 11.285 6.46561C11.285 3.78307 9.12401 1.65079 6.48285 1.65079C5.21372 1.65079 4.04749 2.13227 3.18997 2.95767L4.5277 4.29894C4.80211 4.57407 4.59631 5.02116 4.219 5.02116H0.41161C0.171504 5.02116 0 4.8492 0 4.60846V0.791006C0 0.412699 0.44591 0.240739 0.720317 0.481479L2.02375 1.78836C3.18997 0.68783 4.76781 0 6.51715 0C10.0844 0 13 2.88889 13 6.5C12.9657 10.0767 10.0501 13 6.48285 13ZM7.34037 8.66667L5.62533 7.3254V3.78307C5.62533 3.43915 5.89974 3.16402 6.24274 3.16402H6.65435C6.99736 3.16402 7.27177 3.43915 7.27177 3.78307V6.53439L8.33509 7.35979C8.6095 7.56613 8.6438 7.97884 8.43799 8.25397L8.19789 8.59788C8.02638 8.83862 7.61478 8.87301 7.34037 8.66667Z" fill="#707070"></path>
                </svg>,
            icon_active: <svg fill="none" height="13" viewBox="0 0 13 13" width="13" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.48285 13C4.93931 13 3.53298 12.4497 2.40106 11.5556C2.12665 11.3148 2.09235 10.9021 2.36675 10.627L2.67546 10.3175C2.91557 10.0767 3.25858 10.0767 3.49868 10.2487C4.3219 10.9021 5.35092 11.2804 6.48285 11.2804C9.15831 11.2804 11.285 9.11376 11.285 6.46561C11.285 3.78307 9.12401 1.65079 6.48285 1.65079C5.21372 1.65079 4.04749 2.13227 3.18997 2.95767L4.5277 4.29894C4.80211 4.57407 4.59631 5.02116 4.219 5.02116H0.41161C0.171504 5.02116 0 4.8492 0 4.60846V0.791006C0 0.412699 0.44591 0.240739 0.720317 0.481479L2.02375 1.78836C3.18997 0.68783 4.76781 0 6.51715 0C10.0844 0 13 2.88889 13 6.5C12.9657 10.0767 10.0501 13 6.48285 13ZM7.34037 8.66667L5.62533 7.3254V3.78307C5.62533 3.43915 5.89974 3.16402 6.24274 3.16402H6.65435C6.99736 3.16402 7.27177 3.43915 7.27177 3.78307V6.53439L8.33509 7.35979C8.6095 7.56613 8.6438 7.97884 8.43799 8.25397L8.19789 8.59788C8.02638 8.83862 7.61478 8.87301 7.34037 8.66667Z" fill="#2C72C6"></path>
                        </svg>
        },{
            display_name: 'Bài viết của tôi',
            route: "/settings/me/my-post",
            icon: <i className="fas fa-blog"></i>,
            icon_active: <i style={{color: '#2c72c6'}} className="fas fa-blog"></i>
        },
    ]

    const user = useSelector(selectUser);
    const location = useLocation();
    const activeItem = sidebar_user_item.findIndex(item => `${item.route}` === location.pathname)
    return <div className='l-3 sidebar__user'>
        <div className="sidebar__user__top">
            <div className="img">
                <img src={user.avatar} alt="avatar" />
            </div>
            <div className="hello__name">
                Xin chào,
                <p>{user.name}</p>
            </div>
        </div>
        <div className="sidebar__user__bottom">
            {
                sidebar_user_item.map((item, index) => (
                    <Link to={`${item.route}`} key={index}>
                        <SidebarUserItem 
                            title={item.display_name}
                            icon={item.icon}
                            icon_active={item.icon_active}
                            active={index === activeItem}
                        />
                    </Link>
                ))
            }
        </div>
        </div>;
};

export default SidebarUser;
